import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
// src/pages/TaxEngine.tsx
import React from 'react';
import Card from '../components/Card';
import NumberInput from '../components/NumberInput';
import { load, save } from '../lib/storage';
import { initialState } from '../lib/state';
import { useDebounceEffect } from '../lib/useDebounceEffect';
import { pitTax, marginalRate, progressiveGrossUp } from '../lib/tax';
import ExportPDF from '../components/ExportPDF';
import { useAuth } from '../lib/auth';
import { hasFeature, getDirectorLimit } from '../lib/roles';
function Num({ v, forceNeg }) {
    if (v === undefined || Number.isNaN(v))
        return _jsx("span", { className: "block text-right", children: "-" });
    const neg = forceNeg === true || v < 0;
    const absVal = Math.abs(v);
    const txt = absVal.toLocaleString('th-TH', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    return (_jsxs("span", { className: ['block text-right tabular-nums', neg ? 'text-[#FF7B7B]' : ''].join(' '), children: [neg ? '-' : '', txt] }));
}
const fmt = (n) => n === undefined || Number.isNaN(n) ? '-' : n.toLocaleString('th-TH', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
const emptyIfZero = (n) => (n === 0 ? undefined : n);
export default function TaxEngine() {
    const [data, setData] = React.useState(() => load(initialState));
    useDebounceEffect(() => save(data), [data], 500);
    // ✅ สิทธิ์ฟีเจอร์ตามแผนผู้ใช้
    const { user } = useAuth();
    const plan = user?.plan ?? 'free';
    const canExport = !!user && hasFeature(plan, 'export_pdf');
    const limit = getDirectorLimit(plan); // 1 / 5 / 10
    const canEditPresenter = hasFeature(plan, 'agent_identity_on_pdf'); // Pro/Ultra
    const canUploadLogo = hasFeature(plan, 'custom_branding'); // Ultra เท่านั้น
    // ✅ ถ้าจำนวนผู้บริหารเกินลิมิตจากแผน → ตัดอัตโนมัติ + แจ้งเตือนสั้น ๆ
    React.useEffect(() => {
        setData(s => {
            const ds = s.company.directors;
            if (ds.length > limit) {
                if (typeof window !== 'undefined') {
                    try {
                        alert(`แพ็กเกจปัจจุบันรองรับผู้บริหารสูงสุด ${limit} คน รายการส่วนเกินถูกตัดให้แล้ว`);
                    }
                    catch { }
                }
                return { ...s, company: { ...s.company, directors: ds.slice(0, limit) } };
            }
            return s;
        });
    }, [limit]);
    // ตั้งค่า presenter ครั้งเดียวถ้ายังไม่มี (เพื่อใช้ใน Proposal/PDF)
    React.useEffect(() => {
        setData(s => s.presenter
            ? s
            : {
                ...s,
                presenter: {
                    name: 'สมคิด',
                    phone: '08x-xxx-xxxx',
                    email: 'somkid@company.com',
                    company: '', // ⬅️ ใหม่
                    licenseNo: '', // ⬅️ ใหม่
                    logoDataUrl: undefined
                }
            });
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, []);
    const c = data.company;
    const ds = c.directors;
    // Company inputs
    const income = c.companyIncome ?? 0;
    const expense = c.companyExpense ?? 0;
    const interest = c.interestExpense ?? 0;
    const actualCIT = c.actualCIT ?? 0;
    const currentThaiYear = new Date().getFullYear() + 543;
    const taxYear = c.taxYear;
    // PIT params
    const personalExpense = 100000;
    const personalAllowance = 160000;
    // Directors: premiums & gross-up
    const totalPremium = ds.reduce((s, d) => s + (d.personalInsurancePremium ?? 0), 0);
    const gus = ds.map(d => {
        const base = d.annualSalary ?? 0;
        const prem = d.personalInsurancePremium ?? 0;
        const g = progressiveGrossUp(base, prem, personalExpense + personalAllowance);
        const taxable = Math.max(0, base + prem + g - (personalExpense + personalAllowance));
        const r = marginalRate(taxable);
        return { name: d.name, rate: r, g };
    });
    const totalGrossUp = gus.reduce((s, g) => s + g.g, 0);
    // Corporate tax logic (base 20%)
    const CIT_RATE = 0.20;
    const pbt_before = income - expense - interest;
    const pbt_afterPrem = income - totalPremium - expense - interest;
    const pbt_afterPremGross = income - totalPremium - totalGrossUp - expense - interest;
    const cit_before = Math.max(0, pbt_before) * CIT_RATE;
    const cit_afterPrem = Math.max(0, pbt_afterPrem) * CIT_RATE;
    const cit_afterPremGross = Math.max(0, pbt_afterPremGross) * CIT_RATE;
    // Infer disallowed add-backs from actual tax
    const disallow_tax_before = Math.max(0, actualCIT - cit_before);
    const disallow_base = disallow_tax_before / CIT_RATE;
    const disallow_afterPrem = Math.max(0, disallow_base - totalPremium);
    const disallow_afterPremGross = Math.max(0, disallow_base - totalPremium - totalGrossUp);
    const disallow_tax_afterPrem = disallow_afterPrem * CIT_RATE;
    const disallow_tax_afterPremGross = disallow_afterPremGross * CIT_RATE;
    // True tax by scenarios
    const trueTax_before = actualCIT;
    const trueTax_afterPrem = cit_afterPrem + disallow_tax_afterPrem;
    const trueTax_afterPremGross = cit_afterPremGross + disallow_tax_afterPremGross;
    // Savings
    const taxSaved_afterPrem = Math.max(0, trueTax_before - trueTax_afterPrem);
    const taxSaved_afterPremGross = Math.max(0, trueTax_before - trueTax_afterPremGross);
    const taxSavedPct_afterPrem = trueTax_before > 0 ? (taxSaved_afterPrem / trueTax_before) * 100 : 0;
    const taxSavedPct_afterPremGross = trueTax_before > 0 ? (taxSaved_afterPremGross / trueTax_before) * 100 : 0;
    const combinedCost = totalPremium + totalGrossUp;
    const canAdd = ds.length < limit;
    const handleClear = () => {
        setData(s => ({
            ...s,
            company: {
                ...s.company,
                name: '',
                companyIncome: 0,
                companyExpense: 0,
                interestExpense: 0,
                corporateTaxRate: 0.20,
                actualCIT: 0,
                taxYear: undefined,
                directors: []
            }
        }));
    };
    // ⬇️ handler: อัปโหลดโลโก้ (Ultra)
    const handleLogoChange = (file) => {
        if (!file) {
            setData(s => ({ ...s, presenter: { ...s.presenter, logoDataUrl: undefined } }));
            return;
        }
        const reader = new FileReader();
        reader.onload = () => {
            const dataUrl = reader.result;
            setData(s => ({ ...s, presenter: { ...s.presenter, logoDataUrl: dataUrl } }));
        };
        reader.readAsDataURL(file);
    };
    return (_jsxs("main", { className: "mx-auto max-w-6xl px-6 py-10", children: [_jsxs("div", { className: "mb-3 flex items-center justify-between gap-3", children: [_jsx("h2", { className: "text-xl font-semibold text-gold", children: "Tax Planning with Corporate Life Insurance \u2014 \u0E20.\u0E07.\u0E14.50 & 91" }), canExport ? (_jsx(ExportPDF, { state: data })) : (_jsx("button", { onClick: () => (window.location.href = '/pricing'), className: "inline-flex items-center gap-2 rounded-lg border border-gold/40 px-4 py-2 text-sm hover:bg-gold/10", title: "\u0E2D\u0E31\u0E1B\u0E40\u0E01\u0E23\u0E14\u0E40\u0E1B\u0E47\u0E19 Pro \u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19 Export PDF", children: "Upgrade to Export PDF" }))] }), _jsx("div", { className: "sticky top-0 z-30 -mx-6 px-6 py-3 bg-[color:var(--page)]/85 backdrop-blur supports-[backdrop-filter]:bg-[color:var(--page)]/60 border-b border-white/10", children: _jsxs("div", { className: "max-w-6xl mx-auto flex flex-wrap items-center gap-3", children: [_jsxs("label", { className: "text-sm text-[color:var(--ink-dim)] flex items-center gap-2", children: ["\u0E1B\u0E35\u0E20\u0E32\u0E29\u0E35\u0E2D\u0E49\u0E32\u0E07\u0E2D\u0E34\u0E07:", _jsx("input", { type: "number", inputMode: "numeric", className: "w-24 rounded bg-white/5 px-2 py-1 ring-1 ring-white/10 text-right text-[color:var(--ink)] outline-none focus:ring-gold/60", value: taxYear ?? '', placeholder: String(currentThaiYear), onChange: (e) => {
                                        const v = e.target.value.trim();
                                        setData(s => ({
                                            ...s,
                                            company: { ...s.company, taxYear: v === '' ? undefined : Number(v) }
                                        }));
                                    } })] }), _jsxs("div", { className: "ml-auto flex items-center gap-2", children: [_jsx("button", { onClick: () => document.getElementById('directors-sec')?.scrollIntoView({ behavior: 'smooth' }), className: "text-xs px-3 py-1 rounded ring-1 ring-gold/40 hover:bg-gold/10", children: "\u0E44\u0E1B\u0E1C\u0E39\u0E49\u0E1A\u0E23\u0E34\u0E2B\u0E32\u0E23" }), _jsx("button", { onClick: () => document.getElementById('cit-table-sec')?.scrollIntoView({ behavior: 'smooth' }), className: "text-xs px-3 py-1 rounded ring-1 ring-gold/40 hover:bg-gold/10", children: "\u0E44\u0E1B\u0E15\u0E32\u0E23\u0E32\u0E07 \u0E20.\u0E07.\u0E14.50" })] }), _jsxs("div", { className: "w-full grid grid-cols-2 md:grid-cols-5 gap-3 mt-3", children: [_jsxs("div", { className: "rounded-lg bg-white/5 p-3", children: [_jsx("div", { className: "text-[10px] text-[color:var(--ink-dim)]", children: "\u0E01\u0E33\u0E44\u0E23\u0E01\u0E48\u0E2D\u0E19\u0E20\u0E32\u0E29\u0E35" }), _jsx("div", { className: "text-sm font-medium text-right", children: fmt(pbt_before) })] }), _jsxs("div", { className: "rounded-lg bg-white/5 p-3", children: [_jsx("div", { className: "text-[10px] text-[color:var(--ink-dim)]", children: "\u0E01\u0E33\u0E44\u0E23\u0E01\u0E48\u0E2D\u0E19\u0E20\u0E32\u0E29\u0E35 (\u0E2B\u0E25\u0E31\u0E07\u0E2F: \u0E40\u0E1A\u0E35\u0E49\u0E22 + \u0E20\u0E32\u0E29\u0E35\u0E2D\u0E2D\u0E01\u0E41\u0E17\u0E19)" }), _jsx("div", { className: "text-sm font-semibold text-right text-gold", children: fmt(pbt_afterPremGross) })] }), _jsxs("div", { className: "rounded-lg bg-white/5 p-3", children: [_jsx("div", { className: "text-[10px] text-[color:var(--ink-dim)]", children: "\u0E20\u0E32\u0E29\u0E35\u0E07\u0E1A\u0E08\u0E23\u0E34\u0E07" }), _jsx("div", { className: "text-sm font-medium text-right", children: fmt(trueTax_before) })] }), _jsxs("div", { className: "rounded-lg bg-white/5 p-3", children: [_jsx("div", { className: "text-[10px] text-[color:var(--ink-dim)]", children: "\u0E20\u0E32\u0E29\u0E35 (\u0E2B\u0E25\u0E31\u0E07\u0E2F: \u0E40\u0E1A\u0E35\u0E49\u0E22 + \u0E20\u0E32\u0E29\u0E35\u0E2D\u0E2D\u0E01\u0E41\u0E17\u0E19)" }), _jsx("div", { className: "text-sm font-semibold text-right text-gold", children: fmt(trueTax_afterPremGross) })] }), _jsxs("div", { className: "rounded-lg bg-white/5 p-3", children: [_jsx("div", { className: "text-[10px] text-[color:var(--ink-dim)]", children: "\u0E20\u0E32\u0E29\u0E35\u0E25\u0E14\u0E25\u0E07 (\u0E2B\u0E25\u0E31\u0E07\u0E2F: \u0E40\u0E1A\u0E35\u0E49\u0E22 + \u0E20\u0E32\u0E29\u0E35\u0E2D\u0E2D\u0E01\u0E41\u0E17\u0E19)" }), _jsxs("div", { className: "text-sm font-semibold text-right text-gold", children: [fmt(taxSaved_afterPremGross), ' ', _jsxs("span", { className: "text-[10px] text-gold/80", children: ["(", trueTax_before > 0 ? taxSavedPct_afterPremGross.toFixed(2) : '0.00', "%)"] })] })] })] })] }) }), _jsxs("section", { className: "grid gap-6 mt-6", children: [_jsxs(Card, { title: "\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17", children: [_jsxs("div", { className: "mb-3 flex items-center", children: [_jsx("div", { className: "text-sm text-[color:var(--ink-dim)]", children: "\u0E01\u0E23\u0E2D\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E15\u0E31\u0E49\u0E07\u0E15\u0E49\u0E19\u0E02\u0E2D\u0E07\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17" }), _jsx("button", { onClick: handleClear, className: "ml-auto text-xs px-3 py-1 rounded ring-1 ring-white/20 hover:bg-white/10", children: "\u0E25\u0E49\u0E32\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25" })] }), _jsxs("div", { className: "space-y-3", children: [_jsx("div", { className: "text-sm text-[color:var(--ink-dim)]", children: "\u0E0A\u0E37\u0E48\u0E2D\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17" }), _jsx("input", { className: "w-full rounded-lg bg-white/5 px-3 py-2 ring-1 ring-white/10 outline-none focus:ring-gold/60", value: c.name ?? '', onChange: e => setData(s => ({ ...s, company: { ...s.company, name: e.target.value } })), placeholder: "\u0E0A\u0E37\u0E48\u0E2D\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17" }), _jsx("div", { className: "text-sm text-[color:var(--ink-dim)]", children: "\u0E23\u0E32\u0E22\u0E44\u0E14\u0E49\u0E23\u0E27\u0E21 (Income)" }), _jsx(NumberInput, { value: emptyIfZero(c.companyIncome), onChange: v => setData(s => ({ ...s, company: { ...s.company, companyIncome: v ?? 0 } })), placeholder: "\u0E2A\u0E21\u0E21\u0E38\u0E15\u0E34\u0E10\u0E32\u0E19 \u0E2B\u0E23\u0E37\u0E2D\u0E08\u0E32\u0E01 DBD" }), _jsx("div", { className: "text-sm text-[color:var(--ink-dim)]", children: "\u0E23\u0E32\u0E22\u0E08\u0E48\u0E32\u0E22\u0E23\u0E27\u0E21 (Expense)" }), _jsx(NumberInput, { value: emptyIfZero(c.companyExpense), onChange: v => setData(s => ({ ...s, company: { ...s.company, companyExpense: v ?? 0 } })), placeholder: "\u0E2A\u0E21\u0E21\u0E38\u0E15\u0E34\u0E10\u0E32\u0E19 \u0E2B\u0E23\u0E37\u0E2D\u0E08\u0E32\u0E01 DBD" }), _jsx("div", { className: "text-sm text-[color:var(--ink-dim)]", children: "\u0E14\u0E2D\u0E01\u0E40\u0E1A\u0E35\u0E49\u0E22\u0E08\u0E48\u0E32\u0E22 (Interest expense)" }), _jsx(NumberInput, { value: emptyIfZero(interest), onChange: v => setData(s => ({ ...s, company: { ...s.company, interestExpense: v ?? 0 } })), placeholder: "\u0E2A\u0E21\u0E21\u0E38\u0E15\u0E34\u0E10\u0E32\u0E19 \u0E2B\u0E23\u0E37\u0E2D\u0E08\u0E32\u0E01 DBD" }), _jsx("div", { className: "text-sm text-[color:var(--ink-dim)]", children: "\u0E20\u0E32\u0E29\u0E35\u0E40\u0E07\u0E34\u0E19\u0E44\u0E14\u0E49\u0E08\u0E23\u0E34\u0E07" }), _jsx(NumberInput, { value: emptyIfZero(actualCIT), onChange: v => setData(s => ({ ...s, company: { ...s.company, actualCIT: v ?? 0 } })), placeholder: "\u0E2A\u0E21\u0E21\u0E38\u0E15\u0E34\u0E10\u0E32\u0E19 \u0E2B\u0E23\u0E37\u0E2D\u0E08\u0E32\u0E01 DBD" }), _jsxs("div", { className: "text-sm text-[color:var(--ink-dim)]", children: ["\u0E1A\u0E27\u0E01\u0E01\u0E25\u0E31\u0E1A\u0E04\u0E48\u0E32\u0E43\u0E0A\u0E49\u0E08\u0E48\u0E32\u0E22\u0E15\u0E49\u0E2D\u0E07\u0E2B\u0E49\u0E32\u0E21 (\u0E04\u0E32\u0E14\u0E04\u0E30\u0E40\u0E19\u0E08\u0E32\u0E01\u0E07\u0E1A\u0E08\u0E23\u0E34\u0E07):", ' ', _jsx("span", { className: "text-[color:var(--ink)]", children: fmt(disallow_base) })] }), _jsx("p", { className: "mt-2 text-xs text-[color:var(--ink-dim)]", children: "\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E2B\u0E15\u0E38: \u0E04\u0E33\u0E19\u0E27\u0E13\u0E10\u0E32\u0E19\u0E20\u0E32\u0E29\u0E35\u0E19\u0E34\u0E15\u0E34\u0E1A\u0E38\u0E04\u0E04\u0E25\u0E2D\u0E31\u0E15\u0E23\u0E32 20% \u0E41\u0E25\u0E30\u0E2D\u0E19\u0E38\u0E21\u0E32\u0E19 \u201C\u0E1A\u0E27\u0E01\u0E01\u0E25\u0E31\u0E1A\u0E04\u0E48\u0E32\u0E43\u0E0A\u0E49\u0E08\u0E48\u0E32\u0E22\u0E15\u0E49\u0E2D\u0E07\u0E2B\u0E49\u0E32\u0E21\u201D \u0E08\u0E32\u0E01\u0E20\u0E32\u0E29\u0E35\u0E40\u0E07\u0E34\u0E19\u0E44\u0E14\u0E49\u0E17\u0E35\u0E48\u0E40\u0E2A\u0E35\u0E22\u0E08\u0E23\u0E34\u0E07 \u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E2A\u0E37\u0E48\u0E2D\u0E1C\u0E25\u0E40\u0E21\u0E37\u0E48\u0E2D\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E04\u0E48\u0E32\u0E43\u0E0A\u0E49\u0E08\u0E48\u0E32\u0E22\u0E15\u0E49\u0E2D\u0E07\u0E2B\u0E49\u0E32\u0E21\u0E43\u0E2B\u0E49\u0E40\u0E1B\u0E47\u0E19\u0E04\u0E48\u0E32\u0E43\u0E0A\u0E49\u0E08\u0E48\u0E32\u0E22\u0E2B\u0E31\u0E01\u0E44\u0E14\u0E49 (\u0E40\u0E0A\u0E48\u0E19 \u0E40\u0E1A\u0E35\u0E49\u0E22 + \u0E20\u0E32\u0E29\u0E35\u0E2D\u0E2D\u0E01\u0E41\u0E17\u0E19)" }), _jsxs("div", { className: "text-sm text-[color:var(--ink-dim)] mt-2", children: ["\u0E23\u0E27\u0E21\u0E40\u0E1A\u0E35\u0E49\u0E22\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14: ", _jsx("span", { className: "text-[color:var(--ink)]", children: fmt(totalPremium) })] }), _jsxs("div", { className: "text-sm text-[color:var(--ink-dim)]", children: ["\u0E20\u0E32\u0E29\u0E35\u0E2D\u0E2D\u0E01\u0E41\u0E17\u0E19\u0E17\u0E38\u0E01\u0E17\u0E2D\u0E14 (\u0E23\u0E27\u0E21): ", _jsx("span", { className: "text-[color:var(--ink)]", children: fmt(totalGrossUp) })] }), _jsxs("div", { className: "text-sm text-[color:var(--ink-dim)]", children: ["\u0E23\u0E27\u0E21\u0E40\u0E1A\u0E35\u0E49\u0E22\u0E41\u0E25\u0E30\u0E20\u0E32\u0E29\u0E35\u0E2D\u0E2D\u0E01\u0E41\u0E17\u0E19\u0E17\u0E38\u0E01\u0E17\u0E2D\u0E14 (\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E40\u0E1B\u0E47\u0E19\u0E04\u0E48\u0E32\u0E43\u0E0A\u0E49\u0E08\u0E48\u0E32\u0E22):", ' ', _jsx("span", { className: "text-[color:var(--ink)]", children: fmt(combinedCost) })] })] })] }), _jsx("section", { id: "directors-sec", children: _jsxs(Card, { title: "\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14\u0E1C\u0E39\u0E49\u0E1A\u0E23\u0E34\u0E2B\u0E32\u0E23", children: [_jsxs("div", { className: "flex items-center justify-end gap-2 mb-3", children: [_jsx("button", { onClick: () => setData(s => ({ ...s, company: { ...s.company, directors: s.company.directors.slice(0, -1) } })), className: "px-3 py-1 rounded border border-gold/40 hover:text-gold disabled:opacity-40", disabled: ds.length === 0, title: ds.length === 0 ? 'ไม่มีรายการให้ลบ' : 'ลบผู้บริหารคนสุดท้าย', children: "- \u0E25\u0E1A" }), _jsxs("button", { onClick: () => (ds.length < limit) && setData(s => ({
                                                ...s,
                                                company: {
                                                    ...s.company,
                                                    directors: [
                                                        ...s.company.directors,
                                                        { id: String(Date.now()), name: `ผู้บริหาร ${s.company.directors.length + 1}`, annualSalary: undefined, personalInsurancePremium: undefined }
                                                    ]
                                                }
                                            })), className: "px-3 py-1 rounded border border-gold/40 hover:text-gold disabled:opacity-40", disabled: ds.length >= limit, title: ds.length < limit ? 'เพิ่มผู้บริหาร' : `ครบสูงสุด ${limit} คนแล้ว`, children: ["+ \u0E40\u0E1E\u0E34\u0E48\u0E21 (\u0E2A\u0E39\u0E07\u0E2A\u0E38\u0E14 ", limit, ")"] })] }), ds.map(it => (_jsxs("div", { className: "grid grid-cols-4 gap-2 items-center border-b border-white/10 py-2", children: [_jsx("input", { className: "col-span-1 rounded-lg bg-white/5 px-3 py-2 ring-1 ring-white/10 outline-none focus:ring-gold/60", value: it.name, onChange: e => setData(s => ({
                                                ...s,
                                                company: { ...s.company, directors: s.company.directors.map(d => d.id === it.id ? { ...d, name: e.target.value } : d) }
                                            })), placeholder: "\u0E15\u0E33\u0E41\u0E2B\u0E19\u0E48\u0E07" }), _jsx("div", { className: "col-span-2", children: _jsx(NumberInput, { value: emptyIfZero(it.annualSalary), onChange: v => setData(s => ({
                                                    ...s,
                                                    company: { ...s.company, directors: s.company.directors.map(d => d.id === it.id ? { ...d, annualSalary: v } : d) }
                                                })), placeholder: "\u0E40\u0E07\u0E34\u0E19\u0E44\u0E14\u0E49\u0E1E\u0E36\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E21\u0E34\u0E19 \u0E21.40(1) (\u0E1A\u0E32\u0E17/\u0E1B\u0E35)" }) }), _jsx("div", { className: "col-span-1", children: _jsx(NumberInput, { value: emptyIfZero(it.personalInsurancePremium), onChange: v => setData(s => ({
                                                    ...s,
                                                    company: { ...s.company, directors: s.company.directors.map(d => d.id === it.id ? { ...d, personalInsurancePremium: v } : d) }
                                                })), placeholder: "\u0E40\u0E1A\u0E35\u0E49\u0E22\u0E1B\u0E23\u0E30\u0E01\u0E31\u0E19\u0E2F (\u0E1A\u0E32\u0E17/\u0E1B\u0E35)" }) })] }, it.id)))] }) })] }), _jsxs("section", { id: "cit-table-sec", className: "mt-10", children: [_jsx("h3", { className: "text-lg font-semibold text-gold mb-3", children: "\u0E20.\u0E07.\u0E14.50 \u0E02\u0E2D\u0E07\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17\u0E08\u0E33\u0E01\u0E31\u0E14 (\u0E42\u0E04\u0E23\u0E07\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E43\u0E2B\u0E21\u0E48 \u2014 \u0E2A\u0E37\u0E48\u0E2D\u0E1C\u0E25\u0E25\u0E14\u0E20\u0E32\u0E29\u0E35)" }), _jsx("div", { className: "overflow-x-auto", children: _jsxs("table", { className: "min-w-full text-sm table", children: [_jsx("thead", { className: "text-[color:var(--ink-dim)]", children: _jsxs("tr", { children: [_jsxs("th", { className: "py-2 pr-3 text-left", children: ["\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23 (\u0E20.\u0E07.\u0E14.50)", taxYear ? ` — ปีภาษี ${taxYear}` : ''] }), _jsx("th", { className: "py-2 pr-3 text-right", children: "\u0E01\u0E48\u0E2D\u0E19\u0E40\u0E02\u0E49\u0E32\u0E23\u0E48\u0E27\u0E21\u0E42\u0E04\u0E23\u0E07\u0E01\u0E32\u0E23\u0E2F" }), _jsx("th", { className: "py-2 pr-3 text-right", children: "\u0E2B\u0E25\u0E31\u0E07\u0E2F: \u0E21\u0E35\u0E40\u0E1A\u0E35\u0E49\u0E22" }), _jsx("th", { className: "py-2 pr-3 text-right", children: "\u0E2B\u0E25\u0E31\u0E07\u0E2F: \u0E40\u0E1A\u0E35\u0E49\u0E22 + \u0E20\u0E32\u0E29\u0E35\u0E2D\u0E2D\u0E01\u0E41\u0E17\u0E19" })] }) }), _jsxs("tbody", { className: "align-top", children: [_jsxs("tr", { children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E23\u0E32\u0E22\u0E44\u0E14\u0E49\u0E23\u0E27\u0E21 (\u0E1A\u0E32\u0E17/\u0E1B\u0E35)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: income }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: income }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: income }) })] }), _jsxs("tr", { className: "text-[#FF7B7B]", children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E40\u0E1A\u0E35\u0E49\u0E22\u0E1B\u0E23\u0E30\u0E01\u0E31\u0E19\u0E2F\u0E01\u0E23\u0E21\u0E18\u0E23\u0E23\u0E21\u0E4C\u0E19\u0E34\u0E15\u0E34\u0E1A\u0E38\u0E04\u0E04\u0E25 (\u0E1A\u0E32\u0E17/\u0E1B\u0E35)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: 0 }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: -totalPremium, forceNeg: true }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: -totalPremium, forceNeg: true }) })] }), _jsxs("tr", { className: "text-[#FF7B7B]", children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E04\u0E48\u0E32\u0E20\u0E32\u0E29\u0E35\u0E2D\u0E2D\u0E01\u0E41\u0E17\u0E19\u0E17\u0E38\u0E01\u0E17\u0E2D\u0E14 (\u0E20.\u0E07.\u0E14.50(1)) (\u0E1A\u0E32\u0E17/\u0E1B\u0E35)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: 0 }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: 0 }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: -totalGrossUp, forceNeg: true }) })] }), _jsxs("tr", { className: "text-[#FF7B7B]", children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E23\u0E32\u0E22\u0E08\u0E48\u0E32\u0E22\u0E23\u0E27\u0E21 (\u0E1A\u0E32\u0E17/\u0E1B\u0E35)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: expense, forceNeg: true }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: expense, forceNeg: true }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: expense, forceNeg: true }) })] }), _jsxs("tr", { className: "text-[#FF7B7B]", children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E14\u0E2D\u0E01\u0E40\u0E1A\u0E35\u0E49\u0E22\u0E08\u0E48\u0E32\u0E22 (\u0E1A\u0E32\u0E17/\u0E1B\u0E35)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: -interest, forceNeg: true }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: -interest, forceNeg: true }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: -interest, forceNeg: true }) })] }), _jsxs("tr", { children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E01\u0E33\u0E44\u0E23\u0E01\u0E48\u0E2D\u0E19\u0E20\u0E32\u0E29\u0E35 (\u0E1A\u0E32\u0E17/\u0E1B\u0E35)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: pbt_before }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: pbt_afterPrem }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: pbt_afterPremGross }) })] }), _jsxs("tr", { className: "text-[#FF7B7B]", children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E40\u0E2A\u0E35\u0E22\u0E20\u0E32\u0E29\u0E35\u0E19\u0E34\u0E15\u0E34\u0E1A\u0E38\u0E04\u0E04\u0E25 (\u0E1A\u0E32\u0E17/\u0E1B\u0E35) \u0E10\u0E32\u0E19 20%" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: cit_before, forceNeg: true }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: cit_afterPrem, forceNeg: true }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: cit_afterPremGross, forceNeg: true }) })] }), _jsxs("tr", { children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E1A\u0E27\u0E01\u0E01\u0E25\u0E31\u0E1A\u0E04\u0E48\u0E32\u0E43\u0E0A\u0E49\u0E08\u0E48\u0E32\u0E22\u0E15\u0E49\u0E2D\u0E07\u0E2B\u0E49\u0E32\u0E21 (\u0E1A\u0E32\u0E17/\u0E1B\u0E35)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: disallow_base }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: disallow_afterPrem }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: disallow_afterPremGross }) })] }), _jsxs("tr", { className: "text-[#FF7B7B]", children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E20\u0E32\u0E29\u0E35\u0E08\u0E32\u0E01\u0E2A\u0E48\u0E27\u0E19\u0E17\u0E35\u0E48\u0E1A\u0E27\u0E01\u0E01\u0E25\u0E31\u0E1A \u0E10\u0E32\u0E19 20%" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: disallow_tax_before, forceNeg: true }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: disallow_tax_afterPrem, forceNeg: true }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: disallow_tax_afterPremGross, forceNeg: true }) })] }), _jsxs("tr", { className: "text-[#FF7B7B] font-bold", children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E20\u0E32\u0E29\u0E35\u0E40\u0E07\u0E34\u0E19\u0E44\u0E14\u0E49\u0E17\u0E35\u0E48\u0E40\u0E2A\u0E35\u0E22\u0E08\u0E23\u0E34\u0E07 (\u0E1A\u0E32\u0E17/\u0E1B\u0E35)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: trueTax_before, forceNeg: true }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: trueTax_afterPrem, forceNeg: true }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: trueTax_afterPremGross, forceNeg: true }) })] }), _jsxs("tr", { className: "text-gold font-bold", children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E20\u0E32\u0E29\u0E35\u0E17\u0E35\u0E48\u0E25\u0E14\u0E25\u0E07" }), _jsx("td", { className: "py-2 pr-3 text-right", children: "-" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: taxSaved_afterPrem }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: taxSaved_afterPremGross }) })] }), _jsxs("tr", { className: "text-gold font-bold", children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "% \u0E17\u0E35\u0E48\u0E25\u0E14\u0E25\u0E07" }), _jsx("td", { className: "py-2 pr-3 text-right", children: "-" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx("span", { className: "block text-right", children: trueTax_before > 0 ? taxSavedPct_afterPrem.toFixed(2) + '%' : '-' }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx("span", { className: "block text-right", children: trueTax_before > 0 ? taxSavedPct_afterPremGross.toFixed(2) + '%' : '-' }) })] })] })] }) }), _jsx("p", { className: "mt-2 text-xs text-[color:var(--ink-dim)]", children: "\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E2B\u0E15\u0E38: \u201C\u0E1A\u0E27\u0E01\u0E01\u0E25\u0E31\u0E1A\u0E04\u0E48\u0E32\u0E43\u0E0A\u0E49\u0E08\u0E48\u0E32\u0E22\u0E15\u0E49\u0E2D\u0E07\u0E2B\u0E49\u0E32\u0E21\u201D \u0E2D\u0E19\u0E38\u0E21\u0E32\u0E19\u0E08\u0E32\u0E01\u0E20\u0E32\u0E29\u0E35\u0E40\u0E07\u0E34\u0E19\u0E44\u0E14\u0E49\u0E17\u0E35\u0E48\u0E40\u0E2A\u0E35\u0E22\u0E08\u0E23\u0E34\u0E07 \u0E41\u0E25\u0E49\u0E27\u0E25\u0E14\u0E25\u0E07\u0E15\u0E32\u0E21\u0E2A\u0E48\u0E27\u0E19\u0E17\u0E35\u0E48\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E08\u0E32\u0E01\u0E04\u0E48\u0E32\u0E43\u0E0A\u0E49\u0E08\u0E48\u0E32\u0E22\u0E15\u0E49\u0E2D\u0E07\u0E2B\u0E49\u0E32\u0E21 \u2192 \u0E04\u0E48\u0E32\u0E43\u0E0A\u0E49\u0E08\u0E48\u0E32\u0E22\u0E2B\u0E31\u0E01\u0E44\u0E14\u0E49 (\u0E40\u0E1A\u0E35\u0E49\u0E22/\u0E20\u0E32\u0E29\u0E35\u0E2D\u0E2D\u0E01\u0E41\u0E17\u0E19)" })] }), _jsxs("section", { className: "mt-10", children: [_jsx("h3", { className: "text-lg font-semibold text-gold mb-3", children: "\u0E20.\u0E07.\u0E14.91  \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A\u0E01\u0E23\u0E23\u0E21\u0E01\u0E32\u0E23 (\u0E17\u0E38\u0E01\u0E04\u0E19)" }), _jsx("div", { className: "space-y-4", children: ds.map((it, idx) => {
                            const base = it.annualSalary ?? 0;
                            const prem = it.personalInsurancePremium ?? 0;
                            const tax1 = Math.max(0, base - personalExpense - personalAllowance);
                            const pit1 = pitTax(tax1);
                            const tax2 = Math.max(0, base + prem - personalExpense - personalAllowance);
                            const pit2 = pitTax(tax2);
                            const g3 = progressiveGrossUp(base, prem, personalExpense + personalAllowance);
                            const tax3 = Math.max(0, base + prem + g3 - personalExpense - personalAllowance);
                            const pit3 = pitTax(tax3);
                            const netY1 = base - pit1;
                            const netY2 = base - pit2;
                            const netY3 = base - pit3 + g3;
                            return (_jsxs("details", { className: "rounded-xl bg-white/5 ring-1 ring-white/10 p-3", open: idx === 0, children: [_jsxs("summary", { className: "flex items-center justify-between cursor-pointer select-none", children: [_jsxs("div", { className: "text-sm", children: [_jsx("span", { className: "text-[color:var(--ink-dim)]", children: "\u0E1C\u0E39\u0E49\u0E1A\u0E23\u0E34\u0E2B\u0E32\u0E23:" }), ' ', _jsx("span", { className: "text-[color:var(--ink)] font-medium", children: it.name || `ผู้บริหาร ${idx + 1}` })] }), _jsx("div", { className: "text-xs text-[color:var(--ink-dim)]", children: "\u0E04\u0E25\u0E34\u0E01\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E14\u0E39/\u0E0B\u0E48\u0E2D\u0E19\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14" })] }), _jsx("div", { className: "overflow-x-auto mt-3", children: _jsxs("table", { className: "min-w-full text-sm table", children: [_jsx("thead", { className: "text-[color:var(--ink-dim)]", children: _jsxs("tr", { children: [_jsx("th", { className: "py-2 pr-3 text-left", children: "\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23 (\u0E20.\u0E07.\u0E14.91)" }), _jsx("th", { className: "py-2 pr-3 text-right", children: "\u0E01\u0E48\u0E2D\u0E19\u0E40\u0E02\u0E49\u0E32\u0E23\u0E48\u0E27\u0E21\u0E42\u0E04\u0E23\u0E07\u0E01\u0E32\u0E23\u0E2F" }), _jsx("th", { className: "py-2 pr-3 text-right", children: "\u0E2B\u0E25\u0E31\u0E07\u0E40\u0E02\u0E49\u0E32\u0E23\u0E48\u0E27\u0E21\u0E42\u0E04\u0E23\u0E07\u0E01\u0E32\u0E23\u0E2F \u0E21\u0E35\u0E04\u0E48\u0E32\u0E40\u0E1A\u0E35\u0E49\u0E22\u0E1B\u0E23\u0E30\u0E01\u0E31\u0E19\u0E0A\u0E35\u0E27\u0E34\u0E15" }), _jsx("th", { className: "py-2 pr-3 text-right", children: "\u0E2B\u0E25\u0E31\u0E07\u0E40\u0E02\u0E49\u0E32\u0E23\u0E48\u0E27\u0E21\u0E42\u0E04\u0E23\u0E07\u0E01\u0E32\u0E23\u0E2F \u0E21\u0E35\u0E04\u0E48\u0E32\u0E40\u0E1A\u0E35\u0E49\u0E22\u0E1B\u0E23\u0E30\u0E01\u0E31\u0E19\u0E2F + \u0E04\u0E48\u0E32\u0E20\u0E32\u0E29\u0E35\u0E2A\u0E38\u0E14\u0E17\u0E49\u0E32\u0E22" })] }) }), _jsxs("tbody", { className: "align-top", children: [_jsxs("tr", { children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E40\u0E07\u0E34\u0E19\u0E44\u0E14\u0E49\u0E1E\u0E36\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E21\u0E34\u0E19 \u0E21.40(1) (\u0E1A\u0E32\u0E17/\u0E1B\u0E35)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: base }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: base }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: base }) })] }), _jsxs("tr", { children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E04\u0E48\u0E32\u0E40\u0E1A\u0E35\u0E49\u0E22\u0E1B\u0E23\u0E30\u0E01\u0E31\u0E19\u0E2F (\u0E1A\u0E32\u0E17/\u0E1B\u0E35)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: 0 }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: prem }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: prem }) })] }), _jsxs("tr", { children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E04\u0E48\u0E32\u0E20\u0E32\u0E29\u0E35\u0E2D\u0E2D\u0E01\u0E41\u0E17\u0E19\u0E17\u0E38\u0E01\u0E17\u0E2D\u0E14 (\u0E1A\u0E32\u0E17/\u0E1B\u0E35)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: 0 }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: 0 }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: g3 }) })] }), _jsxs("tr", { className: "text-[#FF7B7B]", children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E2B\u0E31\u0E01 \u0E04\u0E48\u0E32\u0E43\u0E0A\u0E49\u0E08\u0E48\u0E32\u0E22\u0E2A\u0E48\u0E27\u0E19\u0E15\u0E31\u0E27 (\u0E1A\u0E32\u0E17/\u0E1B\u0E35)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: -100000 }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: -100000 }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: -100000 }) })] }), _jsxs("tr", { className: "text-[#FF7B7B]", children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E2B\u0E31\u0E01 \u0E04\u0E48\u0E32\u0E25\u0E14\u0E2B\u0E22\u0E48\u0E2D\u0E19\u0E2A\u0E48\u0E27\u0E19\u0E15\u0E31\u0E27 (\u0E1A\u0E32\u0E17/\u0E1B\u0E35)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: -160000 }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: -160000 }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: -160000 }) })] }), _jsxs("tr", { children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E40\u0E07\u0E34\u0E19\u0E44\u0E14\u0E49\u0E2A\u0E38\u0E17\u0E18\u0E34 (\u0E1A\u0E32\u0E17/\u0E1B\u0E35)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: tax1 }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: tax2 }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: tax3 }) })] }), _jsxs("tr", { children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E10\u0E32\u0E19\u0E20\u0E32\u0E29\u0E35" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsxs("span", { className: "block text-right", children: [(marginalRate(tax1) * 100).toFixed(0), "%"] }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsxs("span", { className: "block text-right", children: [(marginalRate(tax2) * 100).toFixed(0), "%"] }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsxs("span", { className: "block text-right", children: [(marginalRate(tax3) * 100).toFixed(0), "%"] }) })] }), _jsxs("tr", { className: "text-[#FF7B7B]", children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E20\u0E32\u0E29\u0E35\u0E1A\u0E38\u0E04\u0E04\u0E25\u0E2F (PIT) (\u0E1A\u0E32\u0E17/\u0E1B\u0E35)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: pit1, forceNeg: true }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: pit2, forceNeg: true }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: pit3, forceNeg: true }) })] }), _jsxs("tr", { className: "text-gold font-bold", children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E40\u0E07\u0E34\u0E19\u0E2A\u0E38\u0E17\u0E18\u0E34\u0E01\u0E23\u0E23\u0E21\u0E01\u0E32\u0E23 (\u0E1A\u0E32\u0E17/\u0E1B\u0E35)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: netY1 }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: netY2 }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: netY3 }) })] }), _jsxs("tr", { children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E40\u0E07\u0E34\u0E19\u0E44\u0E14\u0E49 (\u0E1A\u0E32\u0E17/\u0E40\u0E14\u0E37\u0E2D\u0E19)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: base / 12 }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: base / 12 }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: base / 12 }) })] }), _jsxs("tr", { className: "text-[#FF7B7B]", children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E20.\u0E07.\u0E14.1 (\u0E1A\u0E32\u0E17/\u0E40\u0E14\u0E37\u0E2D\u0E19)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: pit1 / 12, forceNeg: true }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: pit2 / 12, forceNeg: true }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: pit3 / 12, forceNeg: true }) })] }), _jsxs("tr", { children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E20\u0E32\u0E29\u0E35\u0E2D\u0E2D\u0E01\u0E41\u0E17\u0E19\u0E17\u0E38\u0E01\u0E17\u0E2D\u0E14 (\u0E1A\u0E32\u0E17/\u0E40\u0E14\u0E37\u0E2D\u0E19)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: 0 }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: 0 }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: g3 / 12 }) })] }), _jsxs("tr", { className: "text-gold font-bold", children: [_jsx("td", { className: "py-2 pr-3 text-left", children: "\u0E40\u0E07\u0E34\u0E19\u0E2A\u0E38\u0E17\u0E18\u0E34\u0E01\u0E23\u0E23\u0E21\u0E01\u0E32\u0E23 (\u0E1A\u0E32\u0E17/\u0E40\u0E14\u0E37\u0E2D\u0E19)" }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: (base / 12) - (pit1 / 12) }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: (base / 12) - (pit2 / 12) }) }), _jsx("td", { className: "py-2 pr-3 text-right", children: _jsx(Num, { v: (base / 12) - ((pit3 / 12) - (g3 / 12)) }) })] })] })] }) })] }, it.id));
                        }) })] }), canEditPresenter && (_jsx("section", { className: "mt-8", children: _jsxs(Card, { title: "\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E1C\u0E39\u0E49\u0E19\u0E33\u0E40\u0E2A\u0E19\u0E2D (\u0E43\u0E0A\u0E49\u0E43\u0E19\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23 PDF)", children: [_jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-3", children: [_jsxs("div", { children: [_jsx("div", { className: "text-sm text-[color:var(--ink-dim)]", children: "\u0E0A\u0E37\u0E48\u0E2D-\u0E2A\u0E01\u0E38\u0E25" }), _jsx("input", { className: "w-full rounded-lg bg-white/5 px-3 py-2 ring-1 ring-white/10 outline-none focus:ring-gold/60", value: data.presenter?.name ?? '', onChange: e => setData(s => ({ ...s, presenter: { ...s.presenter, name: e.target.value } })), placeholder: "\u0E40\u0E0A\u0E48\u0E19 \u0E2A\u0E21\u0E04\u0E34\u0E14 \u0E43\u0E08\u0E14\u0E35" })] }), _jsxs("div", { children: [_jsx("div", { className: "text-sm text-[color:var(--ink-dim)]", children: "\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23" }), _jsx("input", { className: "w-full rounded-lg bg-white/5 px-3 py-2 ring-1 ring-white/10 outline-none focus:ring-gold/60", value: data.presenter?.phone ?? '', onChange: e => setData(s => ({ ...s, presenter: { ...s.presenter, phone: e.target.value } })), placeholder: "08x-xxx-xxxx" })] }), _jsxs("div", { children: [_jsx("div", { className: "text-sm text-[color:var(--ink-dim)]", children: "\u0E2D\u0E35\u0E40\u0E21\u0E25" }), _jsx("input", { type: "email", className: "w-full rounded-lg bg-white/5 px-3 py-2 ring-1 ring-white/10 outline-none focus:ring-gold/60", value: data.presenter?.email ?? '', onChange: e => setData(s => ({ ...s, presenter: { ...s.presenter, email: e.target.value } })), placeholder: "somkid@company.com" })] }), _jsxs("div", { children: [_jsx("div", { className: "text-sm text-[color:var(--ink-dim)]", children: "\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17" }), _jsx("input", { className: "w-full rounded-lg bg-white/5 px-3 py-2 ring-1 ring-white/10 outline-none focus:ring-gold/60", value: data.presenter?.company ?? '', onChange: e => setData(s => ({ ...s, presenter: { ...s.presenter, company: e.target.value } })), placeholder: "\u0E40\u0E0A\u0E48\u0E19 \u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17\u0E19\u0E32\u0E22\u0E2B\u0E19\u0E49\u0E32\u0E1B\u0E23\u0E30\u0E01\u0E31\u0E19 \u0E08\u0E33\u0E01\u0E31\u0E14" })] }), _jsxs("div", { children: [_jsx("div", { className: "text-sm text-[color:var(--ink-dim)]", children: "\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48\u0E43\u0E1A\u0E2D\u0E19\u0E38\u0E0D\u0E32\u0E15" }), _jsx("input", { className: "w-full rounded-lg bg-white/5 px-3 py-2 ring-1 ring-white/10 outline-none focus:ring-gold/60", value: data.presenter?.licenseNo ?? '', onChange: e => setData(s => ({ ...s, presenter: { ...s.presenter, licenseNo: e.target.value } })), placeholder: "\u0E40\u0E0A\u0E48\u0E19 \u0E27000000" })] })] }), canUploadLogo && (_jsxs("div", { className: "mt-4 grid grid-cols-1 md:grid-cols-3 gap-3 items-start", children: [_jsxs("div", { className: "md:col-span-2", children: [_jsx("div", { className: "text-sm text-[color:var(--ink-dim)]", children: "\u0E42\u0E25\u0E42\u0E01\u0E49\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13 (\u0E08\u0E30\u0E41\u0E17\u0E19\u0E17\u0E35\u0E48\u0E42\u0E25\u0E42\u0E01\u0E49 BizProtect \u0E1A\u0E19\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23)" }), _jsx("input", { type: "file", accept: "image/*", className: "mt-2 block w-full text-sm file:mr-3 file:rounded file:border-0 file:bg-gold/10 file:px-3 file:py-1 file:text-gold hover:file:bg-gold/20", onChange: (e) => handleLogoChange(e.target.files?.[0] ?? null) }), _jsx("div", { className: "text-xs text-[color:var(--ink-dim)] mt-1", children: "\u0E41\u0E19\u0E30\u0E19\u0E33 PNG \u0E1E\u0E37\u0E49\u0E19\u0E2B\u0E25\u0E31\u0E07\u0E42\u0E1B\u0E23\u0E48\u0E07 \u0E02\u0E19\u0E32\u0E14\u0E01\u0E27\u0E49\u0E32\u0E07 \u2265 600px" }), data.presenter?.logoDataUrl && (_jsx("button", { className: "mt-2 text-xs px-3 py-1 rounded ring-1 ring-white/20 hover:bg-white/10", onClick: () => handleLogoChange(null), children: "\u0E25\u0E1A\u0E42\u0E25\u0E42\u0E01\u0E49" }))] }), _jsxs("div", { className: "md:col-span-1", children: [_jsx("div", { className: "text-sm text-[color:var(--ink-dim)] mb-2", children: "\u0E1E\u0E23\u0E35\u0E27\u0E34\u0E27" }), _jsx("div", { className: "rounded-lg bg-white/5 ring-1 ring-white/10 p-3 flex items-center justify-center h-28", children: data.presenter?.logoDataUrl
                                                ? _jsx("img", { src: data.presenter.logoDataUrl, alt: "logo preview", className: "max-h-24 object-contain" })
                                                : _jsx("span", { className: "text-xs text-[color:var(--ink-dim)]", children: "\u0E22\u0E31\u0E07\u0E44\u0E21\u0E48\u0E44\u0E14\u0E49\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E42\u0E25\u0E42\u0E01\u0E49" }) })] })] }))] }) }))] }));
}
